# ディレクター向け Git マニュアル

## 目次
- [ディレクター向け Git マニュアル](#ディレクター向け-git-マニュアル)
	- [目次](#目次)
	- [とりあえず、これを読めばわかります！](#とりあえずこれを読めばわかります)
	- [Gitとは](#gitとは)
		- [基本概念](#基本概念)
		- [メリット](#メリット)
	- [用語と詳細](#用語と詳細)
		- [リモート](#リモート)
		- [ローカル](#ローカル)
		- [サーバー](#サーバー)
	- [覚えてほしい用語](#覚えてほしい用語)
		- [ディレクションにほぼ必須](#ディレクションにほぼ必須)
			- [リポジトリ](#リポジトリ)
			- [ブランチ](#ブランチ)
		- [覚えるてると便利](#覚えるてると便利)
			- [コミット](#コミット)
			- [マージ](#マージ)
			- [プッシュ](#プッシュ)
			- [プル](#プル)
	- [Vogaroの運用ルール](#vogaroの運用ルール)
		- [main（master）](#mainmaster)
		- [develop](#develop)
		- [feature/◯◯◯◯\_yymmdd](#feature_yymmdd)
	- [参考にした記事](#参考にした記事)



## とりあえず、これを読めばわかります！

一番わかりやすいと思います、正直これ読んでわかったら

[Gitの教え方に困った！非エンジニアにも「いい感じ」でわかるGitの解説](https://en-ambi.com/itcontents/entry/2022/03/31/093000/)

[Vogaro運用のルール](#Vogaro運用のルール)だけ読んでくれたらいいです



## Gitとは

### 基本概念

Gitは「バージョン管理システム」と呼ばれるツールで、主に以下の機能を提供します

- ファイルの変更履歴を記録・管理
- 複数人での共同作業を可能に
- 過去のバージョンに戻すことが可能

### メリット

非エンジニアにとってのGitの主なメリットは

1. アプリと併用することで変更履歴が可視化し管理が容易に
1. チーム内・外注での共同作業がスムーズに
1. 誤って削除や上書きしても復元可能
1. 複数のバージョンを並行して管理可能



## 用語と詳細

テスト・本番のデータを直接触っている、と考えるような相談をよく受けますが、間違いです

### リモート
- クラウド上にみんなが触れるように用意したデータ
- これを直接触ると戻せなくなってしまうので、いったんローカルにコピーして使う
- Gitを通じてみんな見られる

### ローカル
- リモートからコピーしてきて作業者ごとに実際に触るデータ
- 作業後リモートに戻し（プル）、最新に更新する
- Gitを通じても人のものは見られない、

### サーバー
- 作業後、ビルドしたものをサーバーに上げたもの※

> [!NOTE]
> ※ Vogaro含め、ほとんどの今の制作会社はビルドツールを用いて、htmlやcss、jsをより効率的で便利に扱いやすい形にしたものを実際には触って、サーバーに上げるときに変換している。
>
> なので99%の場合、サーバーに上がっているものと、実際に触るデータは同じものではない。エンジニアがサーバーから落としてきて作業して、と言われて困るのはほとんどがこれが原因



## 覚えてほしい用語

### ディレクションにほぼ必須

理解しないと外注やメンバーの依頼時エラーが起きる

#### リポジトリ
- データを全部置いておくところ
- 大元、案件ごとに作る
> [!WARNING]
> そもそも案件ごとにこれを用意しないとGitが利用できないので一番最初に作る

#### ブランチ
- データに名前をつけて切り分けたもの
- 詳しいVogaroでの命名ルールは後述するが、本番、テスト、更新作業ごとに分けられる
> [!NOTE]
> ゲームで少し前に戻れるようにセーブデータをいくつかに分けたことはありませんか？
>
> イメージはそれに近いです


### 覚えるてると便利
エンジニアと共通言語で会話でき、コミュニケーションがスムーズになる

#### コミット
- ブランチがセーブデータなら、commitは1回1回のセーブです、それぞれにメモのようなものができるのでどのような作業だったか記録しています（例：[update] MVの差し替え）
- 作業者の運用次第ですが、細かく戻ったり、部分的に他のブランチにコピーしたりできます

> [!NOTE]
> 1回の依頼で行った複数の作業で一部分公開しなくなった、などに対応できるのはこのセーブを細かく行っていると容易になります

#### マージ
- 分けていたブランチに変更を取り込みます
- 基本は本番公開前mainに、テストアップ前にdevelopに行います
- ファイルの上書きと違うのは、Gitでは1文字1行単位で変更を取り込むことが可能です
> [!NOTE]
> データ1と、データ2でそれぞれ別のダンジョンに向かっていて、2でクリアしたダンジョンに、1でも行ったことにしたりできます

#### プッシュ
- ローカルからリモートへの反映をすることです
- 基本は作業完了時に行います
> [!WARNING]
> よくある事故で、これを作業後に忘れると、クラウド上に作業したものが上がっていないので別メンバーが引き継げない。
>
> また目視で確認できない変更の場合はそのまま古いデータを更新してしまい先祖返りにつながる

#### プル
- クラウドにある最新データを自分のローカルと同期します
- 作業を始める前に忘れると先祖返りの原因になります



## Vogaroの運用ルール

ブランチのルール、一部の例外を除き、すべての案件がこのルールで運用されています

### main（master）
- **今公開されている本番と常に同じ状態**を維持します
- つまり公開時に更新されます
- 常に本番状態にすることで、更新作業進行中に別件で緊急の対応が来た、緊急時本番と同じに一度戻したい、などに対応します

> [!NOTE]
> ※ mainというブランチはリポジトリを作成した際にデフォルトで最初に作られる世界共通に使われているブランチ名です。そのためニュートラルな状態はほとんどこのブランチで運用されます。
>
> なお2020年まではmasterでしたが、人権問題の観点からGitHubがmainに変更し今に至ります。そのためVogaroでも稀に古い案件ではmasterのままです

### develop
- **テスト環境と同じ状態**を維持します
- テストアップの際に更新されます
- 複数の作業が同時進行している場合の作業のバッティングによる先祖返りのチェックが主な運用理由です


### feature/◯◯◯◯_yymmdd
- 実際に作業する際に作成されます、エンジニアはこれをさわった後にマージしています
- 日付の前には英語でなんの作業かわかるようなテキストが入ります
- 作業者ごとではなく、その作業ごとに分けられます
- 途中で作業者が変わった場合、このブランチが共有されることで引き継ぎます



## 参考にした記事

[エンジニア以外が覚えるGitのはなし](https://qiita.com/nanarya/items/6fbae1cb5efc3ea99eba)